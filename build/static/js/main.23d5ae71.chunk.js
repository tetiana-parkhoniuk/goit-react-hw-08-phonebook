(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[4],{141:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(26),u=n.n(c),s=n(25),o=n(14),i=n(74),l=(n(96),n(97),n(7)),f=(n(98),n(29)),b=n(8),d=n(34),j=n.n(d),p=n(2);function h(){var e=Object(o.c)(b.b.getIsLoggedIn);return Object(p.jsxs)("nav",{className:j.a.nav,children:[Object(p.jsx)(s.b,{exact:!0,to:"/",className:j.a.navLink,activeClassName:j.a.activeNavLink,children:"Home"}),e&&Object(p.jsx)(s.b,{to:"/contacts",className:j.a.navLink,activeClassName:j.a.activeNavLink,children:"Phonebook"})]})}var v=n(55),O=n.n(v),g=n(164),x=n(168);function m(){var e=Object(o.b)(),t=Object(o.c)(b.b.getUsername);return Object(p.jsxs)("div",{className:O.a.container,children:[Object(p.jsx)(x.a,{alt:t}),Object(p.jsxs)("span",{className:O.a.text,children:["Welcome, ",t]}),Object(p.jsx)(g.a,{type:"button",onClick:function(){return e(b.a.logout())},variant:"contained",color:"secondary",children:"Log Out"})]})}var k=n(40),y=n.n(k);function w(){return Object(p.jsxs)("div",{children:[Object(p.jsx)(s.b,{to:"/register",exact:!0,className:y.a.link,activeClassName:y.a.activeLink,children:"Register"}),Object(p.jsx)(s.b,{to:"/login",exact:!0,className:y.a.link,activeClassName:y.a.activeLink,children:"Login"})]})}var C=n(165),L=n(80),_=n.n(L);function N(){var e=Object(o.c)(b.b.getIsLoggedIn);return Object(p.jsx)(C.a,{children:Object(p.jsxs)("div",{className:_.a.appBar,children:[Object(p.jsx)(h,{}),e?Object(p.jsx)(m,{}):Object(p.jsx)(w,{})]})})}var I=n(33),U=n(49),F=["children","redirectTo"];function S(e){var t=e.children,n=e.redirectTo,r=void 0===n?"/":n,a=Object(U.a)(e,F),c=Object(o.c)(b.b.getIsLoggedIn);return Object(p.jsx)(l.b,Object(I.a)(Object(I.a)({},a),{},{children:c?t:Object(p.jsx)(l.a,{to:r})}))}var T=["children","restricted","redirectTo"];function W(e){var t=e.children,n=e.restricted,r=void 0!==n&&n,a=e.redirectTo,c=void 0===a?"/":a,u=Object(U.a)(e,T),s=Object(o.c)(b.b.getIsLoggedIn)&&r;return Object(p.jsx)(l.b,Object(I.a)(Object(I.a)({},u),{},{children:s?Object(p.jsx)(l.a,{to:c}):t}))}var P=n(81),A=n.n(P),B=n(82),R=n.n(B);function z(){return Object(p.jsx)("div",{className:R.a.loader,children:Object(p.jsx)(A.a,{type:"Circles",color:"#ffcf33",height:100,width:100,timeout:2e3})})}var E=n(86),M=n(166),V=(n(138),n(167)),J=n(83),Y=n.n(J),q=Object(r.lazy)((function(){return n.e(2).then(n.bind(null,216))})),G=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,217))})),H=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(3)]).then(n.bind(null,219))})),K=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,221))})),Q=Object(E.a)({typography:{},palette:{primary:{light:"#6573c3",main:"#3f51b5",dark:"#2c387e",contrastText:"#fff"},secondary:{light:"#ffcf33",main:"#ffc400",dark:"#b28900",contrastText:"#fff"}}});function Z(){var e=Object(o.b)(),t=Object(o.c)(b.b.getIsFetchingCurrentUser);return Object(r.useEffect)((function(){e(b.a.fetchCurrentUser())}),[e]),!t&&Object(p.jsx)(M.a,{theme:Q,children:Object(p.jsxs)(V.a,{maxWidth:"md",children:[Object(p.jsx)(N,{}),Object(p.jsx)(f.a,{autoClose:3e3,position:"top-right"}),Object(p.jsx)("div",{className:Y.a.bodyContainer,children:Object(p.jsx)(l.d,{children:Object(p.jsxs)(r.Suspense,{fallback:Object(p.jsx)(z,{}),children:[Object(p.jsx)(W,{exact:!0,path:"/",children:Object(p.jsx)(q,{})}),Object(p.jsx)(W,{path:"/register",restricted:!0,children:Object(p.jsx)(G,{})}),Object(p.jsx)(W,{path:"/login",restricted:!0,children:Object(p.jsx)(H,{})}),Object(p.jsx)(S,{path:"/contacts",redirectTo:"/login",children:Object(p.jsx)(K,{})})]})})})]})})}var D=n(16),X=n(84),$=n.n(X),ee=n(36),te=n(56),ne=n(85),re=n.n(ne),ae=n(57),ce=n(44),ue={key:"auth",storage:re.a,whitelist:["token"]},se=Object(D.a)({reducer:{auth:Object(te.a)(ue,ce.a),contacts:ae.b},middleware:[ee.a,$.a],devTools:!1}),oe=Object(te.b)(se);u.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(o.a,{store:se,children:Object(p.jsx)(i.a,{loading:null,persistor:oe,children:Object(p.jsx)(s.a,{children:Object(p.jsx)(Z,{})})})})}),document.getElementById("root"))},27:function(e,t,n){"use strict";n.r(t),n.d(t,"fetchContacts",(function(){return b})),n.d(t,"createContact",(function(){return d})),n.d(t,"deleteContact",(function(){return j}));var r=n(5),a=n.n(r),c=n(12),u=n(16),s=n(17),o=n.n(s);o.a.defaults.baseURL="https://connections-api.herokuapp.com";var i=function(){var e=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.get("/contacts");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.post("/contacts",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.delete("/contacts/".concat(t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=Object(u.b)("contacts/fetchContacts",Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))),d=Object(u.b)("contacts/createContact",function(){var e=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),j=Object(u.b)("contacts/deleteContact",function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(t);case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},34:function(e,t,n){e.exports={navLink:"Navigation_navLink__2U8pw",activeNavLink:"Navigation_activeNavLink__1M6Zj"}},40:function(e,t,n){e.exports={link:"AuthNav_link__2ejsg",activeLink:"AuthNav_activeLink__3huQJ"}},44:function(e,t,n){"use strict";var r,a=n(10),c=n(16),u=n(8),s=Object(c.c)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,isFetchingCurrentUser:!1},extraReducers:(r={},Object(a.a)(r,u.a.register.fulfilled,(function(e,t){var n=t.payload;e.user=n.user,e.token=n.token,e.isLoggedIn=!0})),Object(a.a)(r,u.a.login.fulfilled,(function(e,t){var n=t.payload;e.user=n.user,e.token=n.token,e.isLoggedIn=!0})),Object(a.a)(r,u.a.logout.fulfilled,(function(e,t){e.user={name:null,email:null},e.token=null,e.isLoggedIn=!1})),Object(a.a)(r,u.a.fetchCurrentUser.pending,(function(e){e.isFetchingCurrentUser=!0})),Object(a.a)(r,u.a.fetchCurrentUser.fulfilled,(function(e,t){var n=t.payload;e.user=n,e.isLoggedIn=!0,e.isFetchingCurrentUser=!1})),Object(a.a)(r,u.a.fetchCurrentUser.rejected,(function(e){e.isFetchingCurrentUser=!1})),r)});t.a=s.reducer},55:function(e,t,n){e.exports={container:"UserMenu_container__GgYhE",text:"UserMenu_text__3m5R_"}},57:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r,a=n(10),c=n(87),u=n(16),s=n(27),o=Object(u.c)({name:"contacts",initialState:{entities:[],status:null,error:null,filter:""},reducers:{changeFilter:function(e,t){var n=t.payload;e.filter=n}},extraReducers:(r={},Object(a.a)(r,s.fetchContacts.fulfilled,(function(e,t){var n=t.payload;e.entities=n,e.status=null,e.error=null})),Object(a.a)(r,s.fetchContacts.pending,(function(e,t){e.status="loading",e.error=null})),Object(a.a)(r,s.fetchContacts.rejected,(function(e,t){e.status="rejected",e.error="Error"})),Object(a.a)(r,s.createContact.fulfilled,(function(e,t){var n=t.payload;e.entities=[n].concat(Object(c.a)(e.entities)),e.status=null,e.error=null})),Object(a.a)(r,s.createContact.pending,(function(e,t){e.status="loading",e.error=null})),Object(a.a)(r,s.createContact.rejected,(function(e,t){e.status="rejected",e.error="Error"})),Object(a.a)(r,s.deleteContact.fulfilled,(function(e,t){var n=t.payload;e.entities=e.entities.filter((function(e){return e.id!==n})),e.status=null,e.error=null})),Object(a.a)(r,s.deleteContact.pending,(function(e,t){e.status="loading",e.error=null})),Object(a.a)(r,s.deleteContact.rejected,(function(e,t){e.status="rejected",e.error="Error"})),r)}),i=o.actions.changeFilter;t.b=o.reducer},8:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return m}));var r={};n.r(r),n.d(r,"register",(function(){return v})),n.d(r,"login",(function(){return O})),n.d(r,"logout",(function(){return g})),n.d(r,"fetchCurrentUser",(function(){return x}));var a=n(5),c=n.n(a),u=n(12),s=n(17),o=n.n(s),i=n(16);o.a.defaults.baseURL="https://connections-api.herokuapp.com";var l=function(){var e=Object(u.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.post("/users/signup",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(u.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.post("/users/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(u.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.post("/users/logout");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(u.a)(c.a.mark((function e(t,n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.get("/users/current");case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),j=n(29);o.a.defaults.baseURL="https://connections-api.herokuapp.com";var p=function(e){o.a.defaults.headers.common.Authorization="Bearer ".concat(e)},h=function(){o.a.defaults.headers.common.Authorization=""},v=Object(i.b)("auth/register",function(){var e=Object(u.a)(c.a.mark((function e(t,n){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,l(t);case 4:return a=e.sent,p(a.token),j.b.success("Welcome to the Phonebook!"),e.abrupt("return",a);case 10:return e.prev=10,e.t0=e.catch(1),j.b.error("Please check maybe you are already registered. Also, Name field requires your Name and Surname, and password should consist of numbers and leters, and at least 7 characters."),e.abrupt("return",r(e.t0.message));case 14:case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()),O=Object(i.b)("auth/login",function(){var e=Object(u.a)(c.a.mark((function e(t,n){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,f(t);case 4:return a=e.sent,p(a.token),j.b.success("Welcome back to the Phonebook"),e.abrupt("return",a);case 10:return e.prev=10,e.t0=e.catch(1),j.b.warn("Please check your login details and try again"),e.abrupt("return",r(e.t0.message));case 14:case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()),g=Object(i.b)("auth/logout",function(){var e=Object(u.a)(c.a.mark((function e(t,n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,b();case 4:h(),j.b.success("You have successfully logged out. See you later."),e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(1),j.b.error("Something went wrong. Try to Log Out one more time."),e.abrupt("return",r(e.t0.message));case 12:case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}()),x=Object(i.b)("auth/refresh",function(){var e=Object(u.a)(c.a.mark((function e(t,n){var r,a,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState(),null!==(a=r.auth.token)){e.next=4;break}return e.abrupt("return",n.rejectWithValue());case 4:return p(a),e.prev=5,e.next=8,d();case 8:return u=e.sent,e.abrupt("return",u);case 12:return e.prev=12,e.t0=e.catch(5),e.abrupt("return",n.rejectWithValue(e.t0.message));case 15:case 16:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t,n){return e.apply(this,arguments)}}()),m={getIsLoggedIn:function(e){return e.auth.isLoggedIn},getUsername:function(e){return e.auth.user.name},getIsFetchingCurrentUser:function(e){return e.auth.getIsFetchingCurrentUser}};n(44)},80:function(e,t,n){e.exports={appBar:"AppBar_appBar__2SJuM"}},82:function(e,t,n){e.exports={loader:"Loader_loader__1j2Bs"}},83:function(e,t,n){e.exports={bodyContainer:"App_bodyContainer___-5mK"}},97:function(e,t,n){}},[[141,6,7]]]);
//# sourceMappingURL=main.23d5ae71.chunk.js.map